/**
* Primary mega nav menu styles
*/
.navbar {
  &.ui-main-navbar {
    position: relative;
    z-index: 1500;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -ms-flex-align: center;
    align-items: center;
    padding: 0 1rem;
    margin-bottom: 0;
    width: 100%;
    height: auto;
    max-height: 100%;
    overflow: auto;
    background-color: $siteNavbarBg;
    & .wpglobus-language-switcher {
      -ms-flex-order: 0;
      order: 0;
    }
    & .navbar-brand {
      -ms-flex-order: 1;
      order: 1;
      color: $siteNavbarBgLinkClr;
      & .logo {
        padding: 0;
      }
      & a {
        color: $siteNavbarBgLinkClr;
        font-size: 1.5rem;
        font-weight: 600;
        &:hover,
        &:focus {
          color: $siteNavbarBgLinkHover;
        }
      }
      & .site-title {
        color: $siteNavbarBgTextClr;
        font-size: 1.5rem;
        font-weight: 600;
      }
    } 

    & .navbar-toggler {
      &.collapse-menu-button {
        -ms-flex-order: 2;
        order: 2;
        position: relative;
        z-index: 1600;
        padding: 0.25rem 0.75rem;
        line-height: 1.5;
        background-color: transparent;
        border: 1px solid transparent;
        -moz-border-radius: 0.25rem;
        -webkit-border-radius: 0.25rem;
        border-radius: 0.25rem;
        cursor: pointer;
        & .ui-menu-toggler {
          display: block;
          width: 0.5rem;
          height: 0.5rem;
          -webkit-transform-origin: center center center;
          -moz-transform-origin: center center center;
          -ms-transform-origin: center center center;
          -o-transform-origin: center center center;
          transform-origin: center center center;
          @include transform(rotate3d(0, 0, 1, 0deg) scale3d(1, 1, 1));
          background: $rootLight;
          color: $rootLight;
          -webkit-box-shadow: -0.75rem -0.75rem, 0 -0.75rem, 0.75rem -0.75rem, 0.75rem 0, 0.75rem 0.75rem, 0 0.75rem, -0.75rem 0.75rem, -0.75rem 0;
          box-shadow: -0.75rem -0.75rem, 0 -0.75rem, 0.75rem -0.75rem, 0.75rem 0, 0.75rem 0.75rem, 0 0.75rem, -0.75rem 0.75rem, -0.75rem 0;
          -webkit-transition: transform 0.3s cubic-bezier(0,1,.3,1), background 0.5s ease, box-shadow 0.5s ease;
          -moz-transition: transform 0.3s cubic-bezier(0,1,.3,1), background 0.5s ease, box-shadow 0.5s ease;
          -ms-transition: transform 0.3s cubic-bezier(0,1,.3,1), background 0.5s ease, box-shadow 0.5s ease;
          -o-transition: transform 0.3s cubic-bezier(0,1,.3,1), background 0.5s ease, box-shadow 0.5s ease;
          transition: transform 0.3s cubic-bezier(0,1,.3,1), background 0.5s ease, box-shadow 0.5s ease;
        }
        &.close {
          & .ui-menu-toggler {
            @include transform(rotate3d(0, 0, 1, -45deg) scale3d(0.8, 0.8, 0.8));
            background: $redCloser;
            color: $redCloser;
            -webkit-box-shadow: -0.75rem -0.75rem transparent, 0 -0.75rem, 0.75rem -0.75rem transparent, 0.75rem 0, 0.75rem 0.75rem transparent, 0 0.75rem, -0.75rem 0.75rem transparent, -0.75rem 0;
            box-shadow: -0.75rem -0.75rem transparent, 0 -0.75rem, 0.75rem -0.75rem transparent, 0.75rem 0, 0.75rem 0.75rem transparent, 0 0.75rem, -0.75rem 0.75rem transparent, -0.75rem 0;
          }
        }
      } 
    } 

    & .navbar-collapse {
      &.collapse {
        -ms-flex-order: 3;
        order: 3;
        width: 100%;
        text-align: left;
        display: none;
        &.show {
          display: -ms-flexbox;
          display: flex;
          -ms-flex-direction: column;
          flex-direction: column;
        }
      }
    } 

    & .ui-social-nav {
      -ms-flex-order: 3;
      order: 3;
      margin: 0.5rem auto 0.5rem 0;
    }
    & .secondary-bar {
      -ms-flex-order: 2;
      order: 2;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -ms-flex-align: center;
      align-items: center;
      margin: 0.5rem auto 0.5rem 0;
      padding-bottom: 0.5rem;
      border-top: 2px solid $navbarElmsBg;
      & .nav-link {
        background-color: transparent;
        color: $siteNavbarBgLinkClr;
        &:hover, 
        &:focus {
          color: $siteNavbarBgLinkHover;
          background-color: $siteNavbarBgHover;
        }
      }
      & .accessory-nav {
        width: 100%;
        margin: 0 0 0.5rem 0;
        padding-bottom: 1rem;
      }
      & .ui-searchbox {
        margin-top: 0.5rem;
        & .form-control {
          display: inline-block;
          width: auto;
          height: calc(1.5rem + 0.5rem + 2px);
          padding: 0.25rem 0.5rem;
          font-size: 1rem;
          font-weight: 400;
          line-height: 1.5;
          background-color: $navbarElmsBg;
          color: $navbarElmsTextClr;
          border: 1px solid $navbarElmsTextClr;
          background-clip: padding-box;
          -moz-border-radius: 0.65rem;
          -webkit-border-radius: 0.65rem;
          border-radius: 0.65rem;
          @include twoAttributesTransition( border-color, box-shadow, 0.3s, 0.3s, ease-in-out );
          &::placeholder {
            color: $navbarElmsTextClr;
          }
          &:focus {
            border: 1px solid $navbarElmsTextClr;
          }
        }
        & .btn {
          &.ui-search-btn {
            color: $siteNavbarBgLinkClr;
            border: none;
            cursor: pointer;
          }
        }
      }
    }
    
    & .primary-bar {
      -ms-flex-order: 1;
      order: 1;
      & .navbar-nav {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        -ms-flex-pack: justify;
        justify-content: space-between;
        -ms-flex-align: start;
        align-items: flex-start;
        margin: 0 0 0.5rem 0;
        padding-left: 0;
        & .nav-item {
          width: 100%;
          text-align: left;
          display: block;
          & .nav-link {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            background: transparent;
            color: $siteNavbarBgLinkClr;
            font-weight: 600;
            border: none;
            -webkit-border-radius: 0.5rem 0.5rem 0.5rem 0.5rem;
            -moz-border-radius: 0.5rem 0.5rem 0.5rem 0.5rem;
            border-radius: 0.5rem 0.5rem 0.5rem 0.5rem;
            @include generalSingleAttributeTransition( all, 0.3s, ease-in-out );
            &:hover, 
            &:focus {
              color: $siteNavbarBgLinkHover;
              background-color: $siteNavbarBgHover;
            }
          }
          &.dropdown {
            & .dropdown-toggle {
              -webkit-border-radius: 0.5rem 0.5rem 0 0;
              -moz-border-radius: 0.5rem 0.5rem 0 0;
              border-radius: 0.5rem 0.5rem 0 0;
              &::after {
                display: inline-block;
                margin-left: 30%;
                vertical-align: baseline;
                content: "\002B";
                border-top: 0;
                border-right: 0;
                border-bottom: 0;
                border-left: 0;
              }
            }
            & .dropdown-menu:not(.sub-menu) {
                display: block;
                width: 100%;
                padding: 0.25rem 0.5rem;
                list-style: none;
                border: none;
                border-radius: 0;
                box-shadow: none;
                opacity: 0;
                max-height: 0;
                overflow: hidden;
                -webkit-transform-origin: top center;
                -moz-transform-origin: top center;
                -ms-transform-origin: top center;
                -o-transform-origin: top center;
                transform-origin: top center;
                @include transform(scale(1,0));
                @include generalSingleAttributeTransition( all, 0.6s, ease-in-out );
              &.show {
                opacity: 1;
                max-height: 100%;
                @include transform(scale(1));
              }
            }
            &.has-menu-flex {
              & .dropdown-toggle {
                -webkit-border-radius: 0.5rem 0.5rem 0 0;
                -moz-border-radius: 0.5rem 0.5rem 0 0;
                border-radius: 0.5rem 0.5rem 0 0;
                &::after {
                  display: inline-block;
                  margin-left: 30%;
                  vertical-align: baseline;
                  content: "\002B";
                  border-top: 0;
                  border-right: 0;
                  border-bottom: 0;
                  border-left: 0;
                }
              }
              & .dropdown-menu:not(.sub-menu) {
                display: -ms-flexbox;
                display: flex;
                -ms-flex-wrap: wrap;
                flex-wrap: wrap;
                -ms-flex-pack: justify;
                justify-content: space-between;
                -ms-flex-align: start;
                align-items: flex-start;
                margin-top: 0;
                padding: 0.25rem 0.5rem;
                list-style: none;
                border: none;
                border-radius: 0;
                box-shadow: none;
                opacity: 0;
                max-height: 0;
                overflow: hidden;
                -webkit-transform-origin: top center;
                -moz-transform-origin: top center;
                -ms-transform-origin: top center;
                -o-transform-origin: top center;
                transform-origin: top center;
                @include transform(scale(1,0));
                @include generalSingleAttributeTransition( all, 0.6s, ease-in-out );
                &.show {
                  opacity: 1;
                  max-height: 100%;
                  @include transform(scale(1));
                  & .sub-menu-flex {
                    width: 100%;
                    text-align: left;
                    display: block;
                    & .dropdown-toggle {
                      display: inline-block;
                      font-size: 1.5rem;
                      font-weight: 600;
                      color: $siteNavbarBgLinkClr;
                      background: transparent;
                      text-decoration: underline;
                      cursor: unset;
                      -webkit-border-radius: 0;
                      -moz-border-radius: 0;
                      border-radius: 0;
                      &::after {
                        display: none;
                        content: "";
                        border: none;
                      }
                      &:hover, 
                      &:focus {
                        color: $siteNavbarBgLinkHover;
                        background-color: transparent;
                      }
                    }
                  }
                }
              }
              &.show {
                & .dropdown-toggle {
                  background-color: $siteNavbarBgHover;
                  color: $siteNavbarBgLinkHover;
                  &::after {
                    content: "\2013";
                  }
                }
              }
            }
            &.show {
              & .dropdown-toggle {
                  background-color: $siteNavbarBgHover;
                  color: $siteNavbarBgLinkHover;
                &::after {
                  content: "\2013";
                }
              }
            }
          }
        }
      }
      & .dropdown-menu {
        background-color: transparent;
        color: $siteNavbarBgLinkClr;
        background-clip: padding-box;
        font-weight: 500;
        &.sub-menu {
          position: relative;
          display: block;
          top: auto;
          bottom: auto;
          left: auto;
          z-index: 1000;
          float: none;
          min-width: unset;
          padding: 0.25rem 0.5rem 0.25rem 0;
          margin: .125rem 0 0;
          border-radius: 0;
          opacity: 1;
          max-height: 100vh;
          box-shadow: none;
          text-align: left;
          border: none;
        }
      }
    }
  }
}


@media (min-width: 576px) {
  .navbar {
    &.ui-main-navbar {
      & .navbar-brand {
        -ms-flex-order: 1;
        order: 1;
      }
      & .wpglobus-language-switcher {
        -ms-flex-order: 2;
        order: 2;
        & img {
          width: 2rem;
          height: auto;
        }
      }
      & .navbar-toggler {
        &.collapse-menu-button {
          -ms-flex-order: 0;
          order: 0;
          & .ui-menu-toggler {
            width: 0.625rem;
            height: 0.625rem;
            -webkit-box-shadow: -0.875rem -0.875rem, 0 -0.875rem, 0.875rem -0.875rem, 0.875rem 0, 0.875rem 0.875rem, 0 0.875rem, -0.875rem 0.875rem, -0.875rem 0;
            box-shadow: -0.875rem -0.875rem, 0 -0.875rem, 0.875rem -0.875rem, 0.875rem 0, 0.875rem 0.875rem, 0 0.875rem, -0.875rem 0.875rem, -0.875rem 0;
          }
          &.close {
            & .ui-menu-toggler {
              -webkit-box-shadow: -0.875rem -0.875rem transparent, 0 -0.875rem, 0.875rem -0.875rem transparent, 0.875rem 0, 0.875rem 0.875rem transparent, 0 0.875rem, -0.875rem 0.875rem transparent, -0.875rem 0;
              box-shadow: -0.875rem -0.875rem transparent, 0 -0.875rem, 0.875rem -0.875rem transparent, 0.875rem 0, 0.875rem 0.875rem transparent, 0 0.875rem, -0.875rem 0.875rem transparent, -0.875rem 0;
            }
          }
        } 
      } 
      & .navbar-collapse {
        &.collapse {
          -ms-flex-order: 3;
          order: 3;
          -ms-flex-align: start;
          align-items: flex-start;
        }
      } 
      & .ui-social-nav {
        -ms-flex-order: 3;
        order: 3;
        & .btn-socmedia-circle {
          width: 1.5 * $btn-socmedia-width;
          height: 1.5 * $btn-socmedia-height;
          font-size: 1.5rem;
          & .fab {
            width: 1.5 * $btn-socmedia-icon-width;
            line-height: 1.5 * $btn-socmedia-icon-line-height;
          }
        }
      }
      & .secondary-bar {
        -ms-flex-order: 2;
        order: 2;
      }
      & .primary-bar {
        -ms-flex-order: 1;
        order: 1;
      }
    }
  }
}

@media (min-width: 992px) {
  .navbar {
    &.ui-main-navbar {
      -ms-flex-align: start;
      align-items: flex-start;
      max-height: none;
      overflow: unset;
      & .wpglobus-language-switcher {
        -ms-flex-order: 2;
        order: 2;
        margin-top: 0.5rem;
        & img {
          width: auto;
          height: auto;
        }
      }
      & .navbar-brand {
        -ms-flex-order: 0;
        order: 0;
        & .logo {
          width: 70%;
          height: auto;
          padding: 0;
        }
      }
      & .navbar-collapse {
        &.collapse {
          -ms-flex-order: 1;
          order: 1;
          display: -ms-flexbox;
          display: flex;
          -ms-flex-direction: column;
          flex-direction: column;
          -ms-flex-align: stretch;
          align-items: stretch;
          width: auto;
        }
      }
      & .ui-social-nav {
        -ms-flex-order: 1;
        order: 1;
        margin: 0.5rem 0.5rem 0 auto;
        & .social-menu {
          margin: 0;
        }
        & .btn-socmedia-circle {
          width: $btn-socmedia-width;
          height: $btn-socmedia-height;
          font-size: 1rem;
          & .fab {
            width: $btn-socmedia-icon-width;
            line-height: $btn-socmedia-icon-line-height;
          }
        }
      }
      & .secondary-bar {
        -ms-flex-order: 2;
        order: 2;
        margin: 0.5rem 0 0 auto;
        border-top: none;
        & .accessory-nav {
          width: auto;
          margin: 0 0.5rem 0 0;
          padding-bottom: 0;
        }
      }
      & .primary-bar {
        -ms-flex-order: 3;
        order: 3;
        & .navbar-nav {
          -ms-flex-direction: row;
          flex-direction: row;
          -ms-flex-pack: justify;
          justify-content: space-between;
          -ms-flex-align: start;
          align-items: flex-start;
          position: relative;
          & .nav-item {
            width: auto;
            & .nav-link {
              padding-bottom: 0; 
            }
            &.dropdown {
              position: relative;
              & .dropdown-toggle {
                &::after {
                  margin-left: 0.255em;
                }
              }
              & .dropdown-menu:not(.sub-menu) {
                display: -ms-flexbox;
                display: flex;
                -ms-flex-direction: column;
                flex-direction: column;
                position: absolute;
                top: 100%;
                z-index: 1500;
                width: auto;
                min-width: 20vw;
                padding: 0.5rem 0;
                margin: 0;
                border-bottom-right-radius: 8px;
                border-bottom-left-radius: 8px;
                background-color: $siteNavbarBg;
                &.show {
                  max-height: 80vh;
                  & .nav-item {
                    & .nav-link {
                      padding-bottom: 0.25rem; 
                    }
                  }
                }
              }
              &.has-menu-flex {
                & .dropdown-toggle {
                  &::after {
                    margin-left: 0.255em;
                  }
                }
                & .dropdown-menu:not(.sub-menu) {
                  display: -ms-flexbox;
                  display: flex;
                  position: absolute;
                  right: auto;
                  width: auto;
                  min-width: 50vw;
                  -ms-flex-direction: row;
                  flex-direction: row;
                  -ms-flex-pack: justify;
                  justify-content: space-between;
                  -ms-flex-align: start;
                  align-items: flex-start;
                  -ms-flex-wrap: nowrap;
                  flex-wrap: nowrap;
                  border-bottom-right-radius: 8px;
                  border-bottom-left-radius: 8px;
                  &.show {
                    max-height: 80vh;
                    & .sub-menu-flex {
                      position: relative;
                      width: auto;
                      & .nav-item {
                        & .nav-link {
                          padding-bottom: 0.25rem; 
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        & .dropdown-menu {
          &.sub-menu {
            display: contents;
          }
        }
      }
    }
  }
}
